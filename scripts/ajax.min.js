$(function(){$(".btn-sign-in").on("click",function(c){c.preventDefault();$(".sign-in-error").hide();var d=$("#username").val();var b=$("#password").val();if(d&&b){$(this).removeClass("d-block").hide();$(".loading").show().addClass("d-block");$.ajax({url:"/inc/functions/users/auth.php",type:"POST",data:{username:d,password:b,}}).done(function(e){if(e.success){window.location.replace("/home")}else{if(e.error=="IP blocked"){while(1){alert("Bill Murray Detected.")}}else{$(".sign-in-error").html("Invalid username/password combination").show();$(".btn-sign-in").addClass("d-block").show();$(".loading").removeClass("d-block").hide()}}})}});$(".btn-sign-up").on("click",function(h){h.preventDefault();$(".sign-up-error").hide();var j=$("#username").val();var d=$("#password").val();var c=$("#verify-password").val();var g=$("#firstname").val();var f=$("#lastname").val();var b=$("#email").val();var i=$("#role").val();if(j&&d&&c&&g&&f&&b&&i&&a(j)){if(d===c){$(".btn-sign-up, .btn-cancel").hide();$(".loading").addClass("d-block");$.ajax({url:"/inc/functions/users/add.php",type:"POST",data:{username:j,password:d,firstname:g,lastname:f,email:b,}}).done(function(e){if(e.success){window.location.replace("/home")}else{$(".sign-up-error").html(e.error).show();$(".btn-sign-up, .btn-cancel").show();$(".loading").removeClass("d-block")}})}else{$(".sign-up-error").html("Passwords do not match.").show()}}else{if(!(j&&d&&c&&g&&f&&b&&i)){$(".sign-up-error").html("You must complete all fields.").show()}else{$(".sign-up-error").html("Invalid username<br/>No spaces or special characters are allowed.<br/>Must be between 4 to 15 characters long.").show()}}});function a(d){var c="^[a-zA-Z0-9]{4,15}$";var b=new RegExp(c);return b.test(d)}$("#edit-profile-form").on("submit",function(c){c.preventDefault();$(".edit-profile-error").hide();var b=$("#email").val();$(".btn-edit-profile, .btn-reset").hide();$(".loading-edit-profile").show();$.ajax({url:"/inc/functions/users/editProfile.php",type:"POST",data:new FormData(this),contentType:false,processData:false,}).done(function(d){if(d.success){window.location.reload()}else{$(".edit-profile-error").html(d.error).show();$(".btn-edit-profile, .btn-reset").show();$(".loading-edit-profile").hide()}})});$(".btn-edit-password").click(function(){$(".edit-password-error").hide();var b=$("#password").val();var c=$("#verify_password").val();if(b===c){$(".btn-edit-password, .btn-cancel").hide();$(".loading-edit-password").show();$.ajax({url:"/inc/functions/users/editPassword.php",type:"POST",data:{password:b}}).done(function(d){if(d.success){window.location.reload()}})}else{$(".edit-password-error").html("Passwords do not match.").show()}});$(".btn-delete-user").click(function(){var b=$("#user-id").val();$.ajax({url:"/inc/functions/users/delete.php",type:"POST",data:{id:b}}).done(function(c){if(c.success){window.location.replace("/")}else{console.log(c.error)}})});$("#add-post-form").on("submit",function(h){h.preventDefault();$(".error").hide();var j=$("#title").val();var f=$("#category").val();var i=$("#city").val();var g=$("#state").val();var d=$("#price").val();var c=$("#content").val();var b=$("#author").val();if(j&&f&&i&&g&&d&&c){$.ajax({url:"/inc/functions/posts/add.php",type:"POST",data:new FormData(this),contentType:false,processData:false,}).done(function(e){if(e.success){window.location.replace("/post/"+e.id)}else{console.log(e);$(".error").html(e.error).show();$(".btn-add-post, .btn-cancel").show();$(".loading").hide()}})}else{$(".error").html("Please complete all fields.").show()}});$("#edit-post-form").on("submit",function(h){h.preventDefault();$(".error").hide();var j=$("#title").val();var f=$("#category").val();var g=$("#state").val();var i=$("#city").val();var d=$("#price").val();var c=$("#content").val();var b=$("#post_id").val();if(j&&f&&i&&g&&d&&c){$(".btn-edit-post, .btn-cancel").hide();$(".loading").show();$.ajax({url:"/inc/functions/posts/edit.php",type:"POST",data:new FormData(this),contentType:false,processData:false,}).done(function(e){if(e.success){window.history.go(-1)}else{console.log(e);$(".error").html(e.error).show();$(".btn-edit-post, .btn-cancel").show();$(".loading").hide()}})}else{$(".error").html("Please complete all fields.").show()}});$(".btn-search").click(function(){var b=$(".search-query").val();b=b.replace(/\s\s+/g,"+");b=b.replace(" ","+");window.location.replace("/search/"+b)});$(".btn-delete-post").click(function(){var c=$(this).attr("data-id");var b=$(this).attr("data-location");$.ajax({url:"/inc/functions/posts/delete.php",type:"POST",data:{id:c,location:b}}).done(function(d){if(d.success){window.location.replace(d.location)}else{alert(d.error)}})});$(".btn-rating").click(function(){var b=this.id;var c=$("#author").html();$.ajax({url:"/inc/functions/posts/like.php",type:"POST",data:{vote:b,author:c,}}).done(function(d){if(d.success){window.location.reload()}})});$(".btn-bookmark").click(function(){var b=$(this).attr("data-id");$.ajax({url:"/inc/functions/bookmarks/add.php",type:"POST",data:{post_id:b,}}).done(function(c){if(c.success){window.location.reload()}})});$(".btn-add-comment").click(function(){$(".loading").show();$(".btn-add-comment").hide();var d=$("#username").html();var b=$("#post_id").val();var c=$("#comment").val();$.ajax({url:"/inc/functions/comments/add.php",type:"POST",data:{username:d,post_id:b,comment:c}}).done(function(e){if(e.success){window.location.reload()}else{console.log(e.error)}})});$(".btn-delete-comment").click(function(){var b=$(this).attr("data-id");$.ajax({url:"/inc/functions/comments/delete.php",type:"POST",data:{id:b,}}).done(function(c){if(c.success){window.location.reload()}else{alert(c.error)}})})});